<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Yuan & Yuan Dish - DEBUG MODE</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600;700&family=Source+Sans+3:wght@400;500;600&display=swap"
    />
    <link rel="stylesheet" href="styles.css" />
    <style>
      .debug-banner {
        background: #ff6b6b;
        color: white;
        padding: 10px;
        text-align: center;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div class="debug-banner">ğŸ› DEBUG MODE - Check console and page for info</div>
    
    <main class="container">
      <header class="hero">
        <nav class="top-nav">
          <a class="nav-link active" href="index.html">èœè°±ä¸»é¡µ / Dishes</a>
          <a class="nav-link" href="materials.html">ææ–™ç®¡ç† / Materials</a>
        </nav>
        <h1>Yuan &amp; Yuan Dish / è¢ä¸è¢å®¶å¸¸èœ</h1>
        <p>é€‰èœã€æŸ¥çœ‹æ­¥éª¤ã€ç”Ÿæˆåˆå¹¶è´­ç‰©æ¸…å• / Pick dishes, view steps, and build a combined grocery list.</p>
      </header>

      <section class="card">
        <h2>1) é€‰æ‹©èœå“ / Choose a dish</h2>
        <p class="helper">ç‚¹å‡»å›¾ç‰‡é¢„è§ˆæ­¥éª¤ä¸ææ–™ / Click a photo to preview steps and ingredients.</p>
        <div id="dish-gallery" class="dish-gallery">
          <p style="padding: 20px; background: yellow;">â³ Waiting for JavaScript to load...</p>
        </div>
        <div class="primary-actions">
          <button id="add-dish" type="button">åŠ å…¥æ™šé¤ / Add to dinner</button>
        </div>
      </section>

      <section class="card">
        <h2>2) å…³é”®æ­¥éª¤ / Key steps</h2>
        <div id="dish-steps" class="steps-list"></div>
      </section>

      <section class="card">
        <h2>3) æŒ‰è¶…å¸‚åˆ†ç±»çš„ææ–™ / Materials by store</h2>
        <div id="dish-materials" class="materials-by-store"></div>
      </section>

      <section class="card">
        <h2>4) æ™šé¤è§„åˆ’ / Big dinner plan</h2>
        <div class="dinner-actions">
          <button id="generate-list" type="button">ç”Ÿæˆåˆå¹¶æ¸…å• / Generate combined list</button>
          <button id="clear-dinner" type="button" class="secondary">æ¸…ç©ºæ™šé¤ / Clear dinner</button>
        </div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-top: 20px;">
          <div>
            <h3>å·²é€‰èœå“ / Selected dishes</h3>
            <ul id="selected-dishes"></ul>
          </div>
          <div>
            <h3>åˆå¹¶è´­ç‰©æ¸…å• / Combined grocery list</h3>
            <div id="combined-materials"></div>
          </div>
        </div>
      </section>

      <footer class="attribution">
        <p>
          ğŸ“¦ Product data powered by <a href="https://world.openfoodfacts.org" target="_blank" rel="noopener">Open Food Facts</a> 
          Â· Licensed under <a href="https://opendatacommons.org/licenses/odbl/1.0/" target="_blank" rel="noopener">ODbL</a>
        </p>
      </footer>
    </main>

    <script>
      console.log('%c[DEBUG] Page HTML loaded', 'background: blue; color: white; padding: 2px 5px;');
      console.log('Current time:', new Date().toISOString());
    </script>

    <!-- Load store data files (simulating 4 separate database tables) -->
    <script src="wholefoods-data.js"></script>
    <script>console.log('%c[DEBUG] wholefoods-data.js loaded:', typeof WHOLEFOODS_MATERIALS !== 'undefined' ? WHOLEFOODS_MATERIALS.length + ' items' : 'FAILED', 'background: green; color: white; padding: 2px 5px;');</script>
    
    <script src="safeway-data.js"></script>
    <script>console.log('%c[DEBUG] safeway-data.js loaded:', typeof SAFEWAY_MATERIALS !== 'undefined' ? SAFEWAY_MATERIALS.length + ' items' : 'FAILED', 'background: red; color: white; padding: 2px 5px;');</script>
    
    <script src="ranch99-data.js"></script>
    <script>console.log('%c[DEBUG] ranch99-data.js loaded:', typeof RANCH99_MATERIALS !== 'undefined' ? RANCH99_MATERIALS.length + ' items' : 'FAILED', 'background: orange; color: white; padding: 2px 5px;');</script>
    
    <script src="traderjoes-data.js"></script>
    <script>console.log('%c[DEBUG] traderjoes-data.js loaded:', typeof TRADERJOES_MATERIALS !== 'undefined' ? TRADERJOES_MATERIALS.length + ' items' : 'FAILED', 'background: teal; color: white; padding: 2px 5px;');</script>
    
    <script src="data.js"></script>
    <script>
      console.log('%c[DEBUG] data.js loaded', 'background: purple; color: white; padding: 2px 5px;');
      console.log('window.DATA:', window.DATA);
      console.log('window.DATA.MATERIALS:', window.DATA ? window.DATA.MATERIALS.length : 'N/A');
      console.log('window.DATA.DISHES:', window.DATA ? window.DATA.DISHES.length : 'N/A');
      
      if (window.DATA && window.DATA.DISHES && window.DATA.DISHES.length > 0) {
        console.log('First dish:', window.DATA.DISHES[0].name);
      }
    </script>
    
    <script src="app.js"></script>
    <script>
      console.log('%c[DEBUG] All scripts loaded', 'background: black; color: lime; padding: 2px 5px; font-weight: bold;');
    </script>
  </body>
</html>
