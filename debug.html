<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Debug - Yuan & Yuan Dish</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }
    .section {
      background: white;
      padding: 20px;
      margin: 20px 0;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .good { color: green; }
    .bad { color: red; }
    pre {
      background: #f0f0f0;
      padding: 10px;
      border-radius: 4px;
      overflow-x: auto;
    }
  </style>
</head>
<body>
  <h1>Debug Information</h1>

  <div class="section">
    <h2>Loading Status</h2>
    <div id="status">Loading...</div>
  </div>

  <div class="section">
    <h2>Store Data Files</h2>
    <div id="stores"></div>
  </div>

  <div class="section">
    <h2>Merged Data</h2>
    <div id="merged"></div>
  </div>

  <div class="section">
    <h2>Dishes</h2>
    <div id="dishes"></div>
  </div>

  <!-- Load scripts in order -->
  <script src="wholefoods-data.js"></script>
  <script src="safeway-data.js"></script>
  <script src="ranch99-data.js"></script>
  <script src="traderjoes-data.js"></script>
  <script>
    // Check store files
    const storesDiv = document.getElementById('stores');
    let storesHTML = '';
    
    const storeChecks = [
      { name: 'WHOLEFOODS_MATERIALS', var: typeof WHOLEFOODS_MATERIALS !== 'undefined' ? WHOLEFOODS_MATERIALS : null },
      { name: 'SAFEWAY_MATERIALS', var: typeof SAFEWAY_MATERIALS !== 'undefined' ? SAFEWAY_MATERIALS : null },
      { name: 'RANCH99_MATERIALS', var: typeof RANCH99_MATERIALS !== 'undefined' ? RANCH99_MATERIALS : null },
      { name: 'TRADERJOES_MATERIALS', var: typeof TRADERJOES_MATERIALS !== 'undefined' ? TRADERJOES_MATERIALS : null }
    ];
    
    storeChecks.forEach(check => {
      if (check.var) {
        storesHTML += `<p class="good">✓ ${check.name}: ${check.var.length} items</p>`;
      } else {
        storesHTML += `<p class="bad">✗ ${check.name}: NOT LOADED</p>`;
      }
    });
    
    storesDiv.innerHTML = storesHTML;
  </script>

  <script src="data.js"></script>
  <script>
    // Check merged data
    const mergedDiv = document.getElementById('merged');
    const dishesDiv = document.getElementById('dishes');
    const statusDiv = document.getElementById('status');
    
    console.log('window.DATA:', window.DATA);
    
    if (window.DATA) {
      mergedDiv.innerHTML = `
        <p class="good">✓ window.DATA exists</p>
        <p>MATERIALS: ${window.DATA.MATERIALS ? window.DATA.MATERIALS.length : 'undefined'}</p>
        <p>DISHES: ${window.DATA.DISHES ? window.DATA.DISHES.length : 'undefined'}</p>
      `;
      
      if (window.DATA.DISHES && window.DATA.DISHES.length > 0) {
        dishesDiv.innerHTML = '<h3>Dishes Found:</h3><ul>' + 
          window.DATA.DISHES.map(d => `<li>${d.name}</li>`).join('') + 
          '</ul>';
        statusDiv.innerHTML = '<p class="good">✅ All data loaded successfully!</p>';
      } else {
        dishesDiv.innerHTML = '<p class="bad">No dishes found</p>';
        statusDiv.innerHTML = '<p class="bad">❌ DISHES array is empty</p>';
      }
      
      // Show first dish details
      if (window.DATA.DISHES && window.DATA.DISHES.length > 0) {
        dishesDiv.innerHTML += '<h3>First Dish Details:</h3><pre>' + 
          JSON.stringify(window.DATA.DISHES[0], null, 2) + '</pre>';
      }
    } else {
      mergedDiv.innerHTML = '<p class="bad">✗ window.DATA does not exist</p>';
      statusDiv.innerHTML = '<p class="bad">❌ window.DATA not initialized</p>';
    }
  </script>
</body>
</html>
